
MDScreen:
    #:import arabic_reshaper arabic_reshaper
    #:import get_display bidi.algorithm.get_display

    name: "main"
    id:login_layout1
    md_bg_color:1,1,1,0
    MDNavigationLayout:
        #MDNavigationDrawer:
        #    id: nav_drawer 
        #    direction: "*Right"
            
            #NavigationDrawerIconButton:
                #icon: 'checkbox-blank-circle'
                #text: "   you"
                    #MDNavigationDrawerIconButton:
                #text:"screen1"
        ScreenManager:
            
            id: screen_manager
            name:"man"
            Screen:
                id:"we"
                BoxLayout:
                    orientation: 'vertical'

                    MDTopAppBar:
                       
                        #title: get_display(arabic_reshaper.reshape('مرحبا بكم  '))
                        title:' alialshhry.com '
                        anchor_title: "center"
                        font_name:"arial.ttf"
                        padding:10,10
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")  ]]
                        
                        right_action_items:
                            [
                            ["dots-vertical", lambda x: nav_drawer.set_state("open")],
                            ["lock", lambda x: app.callback_close()]
                            ]
                    MDLabel:
                        text:""
                        halign:"center"
        
                    Image:
                        source:"images/logoali.jpg"           
                        pos_hint: {"center_x": .5, "center_y": .5}
                    MDLabel:
                        text:""
                        halign:"center"

            Screen:           
                name: "scr1"
                usernameInput: usernameInput
                emailInput: emailInput
                passwordInput: passwordInput
                BoxLayout:
                    orientation: 'vertical'
                    MDTopAppBar:
                        id: toolbar
                        title:get_display(arabic_reshaper.reshape('  '))
                        #on_text_validate: 
                        anchor_title: "left"
                        padding:10,10
                        font_name:'arial.ttf'
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")  ]]
                        title:'alshhry.com'
                        right_action_items:
                            [
                            ["dots-vertical", lambda x: nav_drawer.set_state("open")],
                            #["clock", lambda x: app.callback()]
                            ["clock", lambda x: app.self.clos()]
                            ]
                    
                    MDCard:
                        size_hint:None,None
                        size: 320,400
                        pos_hint:{"center_x":.5,"center_y":.5}
                        elevation:5
                        md_bg_color: 255,255,255,1
                        padding: ('20dp', '20dp', '20dp', '20dp')
                        spacing: 30   
                        orientation: 'vertical'  
                        
                        MDTextField:
                            id:usernameInput
                            on_text_validate:app.on_text_validate()
                            pos_hint: {"center_x": .5, "center_y": .5}
                            #hint_text: "Mobile Number"
                            hint_text:get_display(arabic_reshaper.reshape('رقم الجوال:'))
                            mode: "rectangle"
                            icon_right: "phone"
                            icon_left: "phone"
                            color_active: 1, 1, 1, 1
                            icon_right_color: app.theme_cls.primary_color
                            #font_name: 'arial.ttf'
                            #on_press: #arabic_reshaper.reshape(usr)
                            #on_text_validate:app.valMobile() 
                        MDTextField:
                            id:emailInput
                            pos_hint: {"center_x": .5, "center_y": .5}
                            hint_text: "Enter email"
                            mode: "rectangle"
                            icon_right: "email"
                            icon_left: "email"
                            color_active: 0, 0, 1, 1
                            icon_right_color: app.theme_cls.primary_color
                            #on_press: app.arab()
                            font_name:'arial.ttf'
                            #text:'علي'

                        MDTextField:
                            id:passwordInput
                            pos_hint: {"center_x": .5, "center_y": .5}
                            hint_text: "Enter Passowrd"
                            mode: "rectangle"
                            icon_right: "eye-off"
                            password:True
                            icon_left: "eye-off"
                            color_active: 1, 1, 1, 1
                            icon_right_color: app.theme_cls.primary_color     
                        MDLabel:
                            id:my_label 
                            text:'msg'   
                        MDRectangleFlatButton:
                            text: "  Regster    "
                            #text_color: 1, 1, 1, 1
                            #md_bg_color: 1, 1, 0, 1     
                            pos_hint: {"center_x": .5, "center_y": .5}
                            on_press: root.addInfoToDB()
                            #root.on_text_validate()
                                
            #on_press: root.read()    

                    Widget:
        MDNavigationDrawer:
            id: nav_drawer
            orientation: "vertical"
            anchor: "right"
            #panel_color: "#eeeaea"
            #AnchorLayout:
            #anchor_x: "left"
            padding: "8dp"
            spacing: "8dp"
            #    size_hint_y: None
            #height: avatar.height
                       
                #NavigationDrawerIconButton:
            BoxLayout:
                padding: 10,10,10,10
                spacing: 10
                halign: "center"
                size_hint: 1,0.3
                pos_hint: {"center_x": .5, "center_y": .5}  
                            
                orientation: "vertical" 
                
                MDNavigationDrawerMenu:
                    orientation: "vertical" 
                    MDNavigationDrawerHeader:
                        anchor: "center"
                        font_name: 'arial.ttf'
                        #title: "مرحبا بك"
                        title_color: "#4a4939"
                        text: "          alialshhry.com"
                        spacing: "4dp"
                        padding: "20dp", 0, 0, "56dp"
                        orientation: "vertical"
                        #padding: "8dp"
                        #spacing: "15"
                        halign: "center"
                        AnchorLayout:
                            anchor_x: "left"
                            #size_hint_y: None
                            height: avatar.height
                            halign: "center"
                              
                        Image:
                            id: avatar
                            size_hint: None, None
                            pos_hint: {"center_x": .50, "center_y": .5}
                            size: "56dp", "56dp"
                            source: "data/logo/kivy-icon-256.png"
                            halign: "center"                        
                            spacing: "15"
                        MDLabel:
                            text: " alshhry app"
                            font_style: "Button"
                            size_hint_y: None
                            height: self.texture_size[1]
                            halign: "center"    
                            spacing: "15"
                        MDLabel:
                            text: "pythonshehri@gmail.com"
                            font_style: "Caption"
                            size_hint_y: None
                            height: self.texture_size[1]
                            halign: "center"     
                            spacing: "15"
                    #MDNavigationDrawerLabel:
                        #text: "Regster"

                    MDNavigationDrawerItem:
                        
                            
                        MDList:
                            padding: 10,10,10,0
                            spacing: 40
                            halign: "center"
                            size_hint: 1,0.3
                            pos_hint: {"center_x": .5, "center_y": .5}
                            MDRoundFlatIconButton:
                                text: get_display(arabic_reshaper.reshape('تسجيل مستخدم جديد'))
                                icon: "android"
                                size_hint: 1,0.3
                                text_color: "black"
                                icon: "language-python"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                font_name: 'arial.ttf' 
                                on_press:
                                        #root.nav_drawer.set_state("close")
                                    app.openscreen()
                                        #root.screen_manager.current = "scr 1"    
                            MDRoundFlatIconButton:
                                text: get_display(arabic_reshaper.reshape(' تسجيل الدخول  '))
                                icon: "android"
                                size_hint: 1,0.3
                                text_color: "black"
                                icon: "language-python"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                font_name: 'arial.ttf' 
                                on_press:
                                        #root.nav_drawer.set_state("close")  
                                    app.loginin()
                                        
                                        #root.screen_manager.current = "scr 2"
                                        
                            MDRoundFlatIconButton:
                                text: get_display(arabic_reshaper.reshape(' تواصل معنا  '))
                                icon: "android"
                                size_hint: 1,0.3
                                text_color: "black"
                                icon: "language-python"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                font_name: 'arial.ttf' 
                                on_press:app.tsgeelshow()
                                        #root.nav_drawer.set_state("close")
                                        #root.screen_manager.current = "scr 2"        
                    
               